--- Function que calcula dias que foi feito o cadastro ate a data atual -> Tabela PACIENTES

USE DBMedico;

DROP FUNCTION fctDiasCadastradoPac;

CREATE FUNCTION fctDiasCadastradoPac(@INSERT_DATETIME DATE)
RETURNS int
AS
BEGIN 
	DECLARE @TEMPO_DE_CADASTRO INT

	SELECT @TEMPO_DE_CADASTRO = DATEDIFF(DD,@INSERT_DATETIME,GETDATE())
	FROM PACIENTES

RETURN @TEMPO_DE_CADASTRO
END


SELECT NOME_PACIENTE, END_PAC, CEP_PAC, dbo.fctDiasCadastradoPac(INSERT_DATETIME) AS QTY_DE_DIAS_CADASTRO FROM  PACIENTES
